---
layout: post
title: git命令
tags: [文章]
categories: article
---

## 一、常用操作   
```
$ git add . 或 $ git add [filename]  
<--提交暂存区的指定文件到仓库区-->
$ git commit -m [message]       
<--提交时显示所有diff信息-->
$ git commit -v                      
<--覆盖上一次commit，并包括指定文件的新变化-->
$ git commit --amend -m [message]      
$ git commit --amend [file1][file2]...
$ git status              
<--从服上指定分支拉取项目到当前分支-->
$ git pull origin [分支name]   
<--向服务器上指定分支推送当前分支-->
$ git push origin [分支name]            
```

detached HEAD状态
```
<--基于本次提交创建临时分支-->
$git branch temp fef4501
<--切换到工作分支-->
$git checkout ask_11_16
<--合并代码--->
$git merge temp
<--删除temp分支-->
$git branch -d temp
```



开发过程中常用操作
```
<!--查看文件内容-->
$ cat 文件名称
<!--撤销工作区的内容->
$ git checkout --filename
<!--撤销git add操作，把暂存区的内容放回到工作区-->
$ git reset HEAD filename
<!--看工作区和版本库里面最新版本的区别-->
$ git diff HEAD --readme.txt
```

删除文件
```
<!--文件管理器删除-->
$ rm test.txt
<!--删除并commit-->
$ git rm [filename]
```

## 二、初始化本地仓库

```
<--在当前目录新建一个Git代码库-->
$ git init                              
<--新建一个目录，将其初始化为Git代码库-->
$ git init [project-name]          
<--下载一个项目和它的整个代码历史-->
$ git clone [url]                       
```

## 三、配置   
```
# 显示当前的Git配置
$ git config --list
<-- 编辑Git配置文件,设置提交代码时的用户信息-->
$ git config -e [--global]              
$ git config [--global] user.name "[name]"
$ git config [--global] user.email "[email address]"
```
生成密钥   
```
$ ssh-keygen -t rsa -C"humingx@yeah.net"
```    

## 四、关联一个远程库
```
<!-- 本地仓库关联远程仓库 -->
$ git remote add origin git@server-name:path/repo-name.git
<!-- git 删除远程库关联-->
$ git remote remove origin
<!-- 关联后第一次推送需要参数u -->
$ git push -u origin master
<!--如果本地有未提交的内容-->
$ git pull origin master
```    

## 五、git tag

```
<--列出所有tag-->
$ git tag
<--新建一个tag在当前commit-->
$ git tag [tag]
<--新建一个tag指向指定commit-->
$ git tag [tag][commit]
<--删除本地tag-->
$ git tag -d [tag]
<--删除远程tag-->
$ git push origin :refs/tags/[tagName]
<--查看tag信息-->
$ git show [tag]
<--提交指定tag-->
$ git push [remote][tag]
<--提交所有tag-->
$ git push [remote]--tags refs
<--新建一个分支，指向某个tag-->
$ git checkout -b [branch][tag]
```


## 六、日志查看
```
# 显示当前分支的版本历史
$ git log

# 显示commit历史，以及每次commit发生变更的文件
$ git log --stat

# 搜索提交历史，根据关键词
$ git log -S [keyword]# 显示某个commit之后的所有变动，每个commit占据一行
$ git log [tag] HEAD --pretty=format:%s

# 显示某个commit之后的所有变动，其"提交说明"必须符合搜索条件
$ git log [tag] HEAD --grep feature

# 显示某个文件的版本历史，包括文件改名
$ git log --follow [file]
$ git whatchanged [file]
# 显示指定文件相关的每一次diff
$ git log -p [file]
# 显示过去5次提交
$ git log -5--pretty --oneline

# 显示所有提交过的用户，按提交次数排序
$ git shortlog -sn

# 显示指定文件是什么人在什么时间修改过
$ git blame [file]# 显示暂存区和工作区的差异
$ git diff

# 显示暂存区和上一个commit的差异
$ git diff --cached [file]# 显示工作区与当前分支最新commit之间的差异
$ git diff HEAD

# 显示两次提交之间的差异
$ git diff [first-branch]...[second-branch]# 显示今天你写了多少行代码
$ git diff --shortstat "@{0 day ago}"# 显示某次提交的元数据和内容变化
$ git show [commit]# 显示某次提交发生变化的文件
$ git show --name-only [commit]# 显示某次提交时，某个文件的内容
$ git show [commit]:[filename]# 显示当前分支的最近几次提交
$ git reflog
```

## 七、版本回退
```
<!--回退到某一个版本-->
$ git reset --hard 版本id 或者 $ git reset --hard HEAD~num
<!--查看所有版本id-->
$ git reflog
```

