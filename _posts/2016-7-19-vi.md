---
layout: post
title: vi命令备忘
tags: [教程]
categories: Course
---

     声明：随便转载，请注明出处
     

# 命令行模式下光标移动

############当前文档
n		移动到第n行 
/content	搜索内容
ctrl+d		上翻半页
ctrl+u		下翻半页
;		重复上次的查找操作
.		重复修改操作

###########当前屏幕
H L M （大写）		分别移动到首行、中间行、尾行


###########当前行
i			当前位置插入模式
a			下一个字符插入模式模式
I 			行首插入模式
A 			行尾插入模式
hjkl 			光标移动
shift+6 或者 0		移到行首
shift+4			移到行尾
A 			光标到行尾并追加编辑
o			当前行下插入一个空行
O			当前行上插入一个空行
set relativenumber 	显示相对行号
num+j			上调num行
num+k			下调num行

###########编辑文档
u 			撤销
:w			保存 
:wq			保存退出
q!			不保存退出:
yy			复制当前行
dd			剪切当前行
ndd			剪切n行
d2l			向右剪切2个字符
d2G			向左剪切2个字符
p 			粘贴
D			删除光标到行尾的内容
ggdG 			全选删除
ggVG 			全选 （然后可复制y 粘贴p +y复制到系统剪切板 d删除选中内容）

# *一、简介*
vi编辑器是Linux和Unix上一个功能强大的文本编辑器。它工作在字符模式下，因此效率很高，在服务器管理中的应用较多（服务器配置文件编辑很方便）。vi有三种工作模式： *插入模式* 、*命令模式* 和 *底行模式*。

vi编辑器是所有Unix及Linux系统下标准的编辑器，它的强大不逊色于任何最新的文本编辑器，这里只是简单地介绍一下它的用法和一小部分指令。由于对Unix及Linux系统的任何版本，vi编辑器是完全相同的， 因此您可以在其他任何介绍vi的地方进一步了解它。Vi也是Linux中最基本的文本编辑器，学会它后，您将在Linux的世界里畅行无阻。
  
  
  <br/> 
  
# *二、基本概念*  

#### 1、命令模式（command mode） 

控制屏幕光标的移动，字符、字或行的删除，移动复制某区段及进入Insert mode下，或者到last line mode. 

#### 2、插入模式(insert mode) 

只有在insert mode下才能进行文字输入，可以认为是可编辑模式，按[ESC]回到命令行模式。  

#### 3、底行模式（last line mode）  

将文件保存或者退出vi,也可以设置编辑环境，如寻找字符串、列出行号等。 

注：通常认为底行模式属于命令模式


<br/> 

# *三、基本语法* 

#### 1、进入与退出 

    vi [file name]    在系统提示符$下输入vi [file name]，进入编辑器后默认为命令模式
    vi +
    q                 在命令模式下输入 q ，可以退出编辑器 

#### 2、进入插入模式  

    a                 在命令模式下按下 a , 进入插入模式， 并从光标位置的后面开始录入
    A                 在命令模式下按下 A , 进入插入模式， 并从光标所在行的末尾开始录入
    i                 在命令模式下按下 i , 进入插入模式， 并从光标位置的前面开始录入
    I                 在命令模式下按下 i , 进入插入模式， 并从光标所在行的第一个非空白的字符前面开始录入
    o                 在命令模式下按下 i , 进入插入模式， 并从光标所在行下新增一行开始录入
    O                 在命令模式下按下 i , 进入插入模式， 并从光标所在行上性增一行开始录入 
    Esc               在插入模式下按Esc ,进入命令模式

#### 3、移动光标 （命令行模式下） 

    0                 输入0，移动到光标到文档开始位置
    $                 输入$,移动到光标到文档结束位置
    
    [home]            按下[home],光标所在列的最前面  
    [end]             按下[end],光标所在列的最后面
    
    [CTRL][D]         按下[CTRL][D],向下半页
    [CTRL][F]         按下[CTRL][F],向下一页
    [CTRL][U]         按下[CTRL][U],向上半页
    [CTRL][B]         按下[CTRL][B],向上一页
    
    h/backspace       按下h 或者backspace，光标左移一个字符 
    l/space           按下l 或者space,光标右移一个字符 
    j                 按下j,光标上移一行 ，同[ctrl][p] 
    k                 按下k,光标下移一行 ，同[ctrl][n]
            
    w/W               按下w或者W,移动光标至，右边所在词语的词首  
    b/B               按下b或者B,移动光标至，左边所在词语的词首 ,同e或者E
       
    (                 按下（，移动至句首     
    )                 按下），移动至句尾
    {                 按下 {，移动至段首
    }                 按下 }，移动至段尾  
    
    n(                输入数字n，按下（ ，光标向左移动几个句子  
    n)                输入数字n,按下 ） ，光标向右移动几个句子  
    n{                输入数字n, 按下 { ，光标向左移动几个段落  
    n}                输入数字n, 按下 } ，光标向右移动几个段落    
    
    nG                输入数字n,然后按下大写G,光标移动到第n行
    n+                输入数字n,然后按下+,光标下移n行
    n-                输入数字n,然后按下-,光标上移n行
    n$                输入数字n,按下$,光标移至第n行尾
    
    H                 按下H，光标移至屏幕顶行
    M                 按下M，光标移至屏幕中间行
    L                 按下L，光标移至屏幕最后行
    0                 按下数字0，光标移至当前行行首
    $                 按下$,光标移至当前行行尾 
    
    fx                按下f ,并输入x ,光标向右移动到x所在位置
    Fx                按下F，输入x  ，光标向左移动到x位置
    
    tx                按下t ,并输入x ,光标向右移动到x所在位置前一个位置  
    Tx                按下T ,并输入x ,光标向右移动到x所在位置前一位置
     ；               按下； ，重复fx  tx 一次 
     ，               按下， ，重复Fx Tx 一次
    
#### 5、选中命令 （命令模式下）

    v                按下v ,进入可视化模式，进行选中
    V                按下V,进入可视化模式，按行选中
    [ctrl][v]        区块选择   

#### 6、复制、粘贴 命令 

    y                复制选中内容  
    yy               复制当前行
    yw               复制光标位置的单词
    y$               复制光标位置到行尾的内容
    y^               复制光标位置到行首的内容
    p                粘贴选中内容


#### 7、 撤销(命令模式下) 

    u                 按下u，撤销前一步操作
    [ctrl][r]         按下[ctrl][u],恢复上一步的撤销操作    

#### 8、搜索、替换 命令 （命令模式下） 

    /string            输入/string ，光标向右移动到第一string 的位置
    ？string           输入？string ，光标向左到第一个string位置
    n                  重复/string一次
    N                  重复？string一次 
    
    ：g/p2/s//p2/g     将文本中所有p1用p2代替
    ：s/p1/p2/g        将当前行中所有p1用p2代替

#### 9、 删除命令（命令模式下） 
 
    d0                 按下d , 输入数字0 ，删除光标位置到行首内容分
    d$                 按下的，输入$ , 删除光标位置到行尾内容
    ndd                输入数字n,然后按两次d ,删除当前行及其后的n-1行
    x                  删除光标后的一个字符
    X                  删除光标钱的一个字符
    [ctrl][u]          删除输入模式下所输入的文本
    s                  删除光标所在字符，并进入插入模式
    S                  删除光标所在行，并进入插入模式

#### 10、替换命令 

     R                 在命令模式下按下 R ,进入插入模式，  并改写方式录入直到Esc退出
     r                 在命令模式下按下 r ,进入插入模式，  并改写光标后一个字符 
     
#### 11、 底行模式命令 

    ：n1,n2 co n3          将n1到n2之间的行的内容拷贝到n3行下
    ：n1,n2 m n3           将n1到n2职间的内容移动到n3行下
    ：n1,n2 d              删除n1 到n2职间的内容
    ：w                    保存当前文档
    ：e filename           打开文件filename进行编辑
    ：x                    保存当前文件并退出
    ：q                    退出vi
    ：q!                   不保存文件并退出
    ：！commond            执行shell命令commond
    
#### 12、显示与选项设置  （底行模式）
    语法：                 ：set [position]
    ：set all              列出所有选项设置情况 
    ：set positon?         显示一个选项的值
    ：set term             设置终端类型
    ：set ignorance        搜索中忽略大小写
    ：set list             显示制表位和行尾标志
    ：set number           显示行号
    ：set report           显示由面向行的命令修改过的数目
    ：set warn             在赚到别的文件时，如果没有保存，则显示no write信息
    ：set nomagic          允许在搜索模式中，使用前面不带“\”的特殊字符
    ：set nowrapscan       允许在搜索模式中到达一端时，又从另一端开始
    ：set mesg             允许vi显示其他用户write写到自己终端上的信息  
      
    
    
# *四、待完善*
 ...
